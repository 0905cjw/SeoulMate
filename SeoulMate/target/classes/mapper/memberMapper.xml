<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.seoulmate.home.dao.MemberDAO">
	<select id="loginCheck" resultType="com.seoulmate.home.vo.MemberVO">
		select userid, username, state, grade, area from member where userid=#{param1} and userpwd=#{param2}
	</select>
  	<select id="idCheck" resultType="int">
  		select count(userid) from member where userid=#{param1}
  	</select>
  	<insert id="memberInsert" parameterType="com.seoulmate.home.vo.MemberVO">
  		insert into member(no, userid, userpwd, username, tel, email, birth, gender, area, profilePic) 
  		values(memsq.nextval, #{userid}, #{userpwd}, #{username}, #{tel}, #{email}, #{birth}, #{gender}, #{area}, 'example')
  	</insert>
  	<select id="memberSelect" parameterType="String" resultType="com.seoulmate.home.vo.MemberVO">
  		select userid, userpwd, username, tel, to_char(birth, 'YYYY/MM/DD') birth, gender, area, email, grade from member where userid=#{param1}
  	</select>
  	<!-- public MemberVO memberPwdSelect(String userid); -->
  	<select id="memberPwdSelect" resultType="int">
  		select count(userpwd) userpwd from member where userid=#{param1} and userpwd=#{param2}
  	</select>
  	<update id="memberUpdatePwdY" parameterType="com.seoulmate.home.vo.MemberVO">
  		update member set userpwd=#{userpwd}, tel=#{tel}, area=#{area}, email=#{email} where userid=#{userid}
  	</update>
  	<update id="memberUpdatePwdN" parameterType="com.seoulmate.home.vo.MemberVO">
  		update member set tel=#{tel}, area=#{area}, email=#{email} where userid=#{userid}
  	</update>
  	<select id="memberFindId" resultType="String">
  		select userid from member where username=#{username} and email=#{email}
  	</select>
  	<update id="memberExit">
  		update member set state='탈퇴' where userid=#{param1} and userpwd=#{param2}
  	</update>
  	<update id="gradePremiumUpdate">
  		update member set grade=2 where userid=#{param1}
  	</update>
  </mapper>

